{"componentChunkName":"component---src-templates-blog-js","path":"/blog/gatsby","result":{"data":{"markdownRemark":{"frontmatter":{"title":"How to Set up a Node.js Express Server for React","date":"25-07-2021"},"html":"<p><a href=\"https://dev.to/pratham10/how-to-set-up-a-node-js-express-server-for-react-2fja\">Readers: 14,689</a></p>\n<p>React is a JavaScript library used to build user interfaces and develop single-page applications using reusable UI components. React is used for building front-end apps that can communicate with the back-end server.</p>\n<p>A React front-end connected to a Node back-end is a rock-solid combination for any application you want to build.</p>\n<p><em>This guide is designed to help you create full-stack projects with React as easily as possible.</em></p>\n<h2>Prerequisites</h2>\n<ul>\n<li>A text editor</li>\n<li>Node.js installed on your computer</li>\n<li>Prior knowledge of React, Node, and npm</li>\n</ul>\n<h2>Tools You Will Need</h2>\n<ol>\n<li>Make sure Node and NPM are installed on your computer. You can download both at <a href=\"nodejs.org\">nodejs.org</a> (NPM is included in your Node installation)</li>\n<li>Use a code editor of your choice. I am using and would personally recommend using VSCode. You can download VSCode at <a href=\"code.visualstudio.com\">code.visualstudio.com.</a></li>\n<li>Make sure you have Git installed on your computer. This is necessary for deploying our application with Heroku. You can get it at <a href=\"git-scm.com\">git-scm.com</a></li>\n</ol>\n<h2>STEP 1: BACKEND</h2>\n<p>First, create a folder of your project, name it as <em>react-node-app</em> , open this folder in your text editor</p>\n<p>To create our Node project open your terminal and run the following command</p>\n<pre><code>npm init -y\n</code></pre>\n<p>By running this you will see package.json file has been created in our folder, This file will help us to manage dependencies our app needs.</p>\n<p>Now, in our terminal we will install express as a dependency</p>\n<pre><code>npm i express\n</code></pre>\n<p>After that, we will create a script in package.json that will start our web server when we run it with npm start:</p>\n<pre><code>...\r\n\"scripts\": {\r\n  \"start\": \"node server/index.js\"\r\n},\r\n...\n</code></pre>\n<p>Our package.json file should look like this</p>\n<pre><code>{\r\n  \"name\": \"react-node-app\",\r\n  \"version\": \"1.0.0\",\r\n  \"description\": \"\",\r\n  \"main\": \"index.js\",\r\n  \"scripts\": {\r\n    \"test\": \"echo \\\"Error: no test specified\\\" &#x26;&#x26; exit 1\",\r\n    \"start\": \"node server/index.js\"\r\n  },\r\n  \"keywords\": [],\r\n  \"author\": \"\",\r\n  \"license\": \"ISC\",\r\n  \"dependencies\": {\r\n    \"express\": \"^4.17.1\"\r\n  }\r\n}\n</code></pre>\n<p>Now, create a new folder in our project and name it server.\r\nInside server create index.js file.</p>\n<p>We'll use Express to create a simple web server for us which runs on port 3001</p>\n<pre><code>// server/index.js\r\n\r\nconst express = require(\"express\");\r\n\r\nconst PORT = process.env.PORT || 3001;\r\n\r\nconst app = express();\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`Server listening on ${PORT}`);\r\n});\n</code></pre>\n<p>We can now run our app using this script <em>npm start</em> in our terminal</p>\n<pre><code>npm start\r\n\r\n> node server/index.js\r\n\r\nServer listening on 3001\n</code></pre>\n<h2>Step 2: Create an API Endpoint</h2>\n<p>We want to use our Node and Express server as an API, so that it can give our React app data.</p>\n<p>set a GET route that we will, later on, fetch from our client-side React App.</p>\n<pre><code>// server/index.js\r\n...\r\n\r\napp.get(\"/api\", (req, res) => {\r\n  res.json({ message: \"Hello from Express!\" });\r\n});\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`Server listening on ${PORT}`);\r\n});\n</code></pre>\n<p>Make sure you put this above app.listen</p>\n<p>Here, we are simply sending \"Hello from Express\" to our react app</p>\n<p>Since, we have made changes to our server we have to restart our server\r\nTo do that, open your terminal press commmand/ctrl + c, amd then restart the server by running npm start</p>\n<p>Now we can simply visit <a href=\"http://localhost:3001/api\">http://localhost:3001/api</a> in our browser and see our message:</p>\n<p><strong>{\"message\": \"Hello from Express\"}</strong></p>\n<h2>Step 3: Creating React front-end</h2>\n<p>Let's move to our front-end part now</p>\n<p>Open another terminal tab and use create-react-app to create a new React project with the name client:</p>\n<pre><code>npx create-react-app client\n</code></pre>\n<h3>Setting up proxy</h3>\n<p>In this step, the Webpack development server was auto-generated when we ran the create-react-app command.</p>\n<p>Webpack Development Server (WDS) is a tool that helps the developers make changes to the web appâ€™s frontend and renders them to the browser with no need to refresh the browser.</p>\n<p>The only change we have to make is to add a property called proxy to our package.json file.</p>\n<p>This will allow us to make requests to our Node server without having to provide the origin it is running on (<a href=\"http://localhost:3001\">http://localhost:3001</a>) every time we make a network request to it:</p>\n<pre><code>// client/package.json\r\n\r\n...\r\n\"proxy\": \"http://localhost:3001\",\r\n...\n</code></pre>\n<p>The modified package.json file will look like this</p>\n<pre><code>{\r\n  \"name\": \"client\",\r\n  \"version\": \"0.1.0\",\r\n  \"private\": true,\r\n  \"dependencies\": {\r\n    \"@testing-library/jest-dom\": \"^5.14.1\",\r\n    \"@testing-library/react\": \"^11.2.7\",\r\n    \"@testing-library/user-event\": \"^12.8.3\",\r\n    \"react\": \"^17.0.2\",\r\n    \"react-dom\": \"^17.0.2\",\r\n    \"react-scripts\": \"4.0.3\",\r\n    \"web-vitals\": \"^1.1.2\"\r\n  },\r\n  \"scripts\": {\r\n    \"start\": \"react-scripts start\",\r\n    \"build\": \"react-scripts build\",\r\n    \"test\": \"react-scripts test\",\r\n    \"eject\": \"react-scripts eject\"\r\n  },\r\n  \"eslintConfig\": {\r\n    \"extends\": [\r\n      \"react-app\",\r\n      \"react-app/jest\"\r\n    ]\r\n  },\r\n  \"browserslist\": {\r\n    \"production\": [\r\n      \">0.2%\",\r\n      \"not dead\",\r\n      \"not op_mini all\"\r\n    ],\r\n    \"development\": [\r\n      \"last 1 chrome version\",\r\n      \"last 1 firefox version\",\r\n      \"last 1 safari version\"\r\n    ]\r\n  },\r\n  \"proxy\": \"http://localhost:3001\"\r\n}\n</code></pre>\n<p>Now we can start up our React app by running its start script, which is the same as our Node server. First make sure to cd into the newly-created client folder.</p>\n<p>After that, will start up on localhost:3000:</p>\n<pre><code>cd client\r\nnpm start\r\n\r\nCompiled successfully!\r\n\r\nYou can now view client in the browser.\r\n\r\nhttp://localhost:3000\n</code></pre>\n<h2>Step 4: Make HTTP Requests from React to Node</h2>\n<p>Now that we have a working React app, we want to use it to interact with our API.</p>\n<p>Let's see how to fetch data from the /api endpoint that we created earlier.</p>\n<p>To do so, we can head to the App.js component in our src folder and make an HTTP request using useEffect.</p>\n<p>We will make a simple GET request using the Fetch API to our backend and then have our data returned as JSON.</p>\n<p>Once we have the data returned to us, we will get the message property (to grab our greeting that we sent from the server) and then put it in a state variable called data.</p>\n<p>This will allow us to display that message in our page if we have it. We are using a conditional in our JSX to say that if our data is not there yet, show the text \"Loading...\".</p>\n<pre><code>// client/src/App.js\r\n\r\nimport React from \"react\";\r\nimport logo from \"./logo.svg\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [data, setData] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    fetch(\"/api\")\r\n      .then((res) => res.json())\r\n      .then((data) => setData(data.message));\r\n  }, []);\r\n\r\n  return (\r\n    &#x3C;div className=\"App\">\r\n      &#x3C;header className=\"App-header\">\r\n        &#x3C;img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n        &#x3C;p>{!data ? \"Loading...\" : data}&#x3C;/p>\r\n      &#x3C;/header>\r\n    &#x3C;/div>\r\n  );\r\n}\r\n\r\nexport default App;\n</code></pre>\n<h2>Conclusion</h2>\n<p>A lot can be done with Express backend, like make calls to the database, but on this guide, we have concentrated on how to quickly connect to the backend Express server from client-side React App.</p>\n<p>The code snippets and files used in this guide can be accessed at the <a href=\"https://github.com/bhagatpratham/react-node-boilerplate\">GitHub repository here</a> .</p>\n<p><strong>IF YOU LIKED THE POST, THEN YOU CAN BUY ME MY FIRST COFFEE EVER, THANK YOU</strong></p>\n<p><a href=\"https://www.buymeacoffee.com/pratham10\" target=\"_blank\"><img src=\"https://cdn.buymeacoffee.com/buttons/default-orange.png\" alt=\"Buy Me A Coffee\" height=\"41\" width=\"174\"></a></p>\n<p><strong>Happy coding!</strong></p>"}},"pageContext":{"slug":"gatsby"}},"staticQueryHashes":["3159585216","440568431"]}